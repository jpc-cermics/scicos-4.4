include ../../../../../Path.incl

PNGS= ABSBLK_f.png \
	ABS_VALUEi.png \
	ABS_VALUE.png \
	ACTUATOR_f.png \
	Actuator.png \
	AFFICH_f.png \
	AFFICH_m.png \
	ANDBLK.png \
	ANDLOG_f.png \
	Assignment.png \
	AtanTF.png \
	AUTOMAT.png \
	Bache.png \
	BACKLASH.png \
	BIGSOM_f.png \
	BITCLEAR.png \
	BITSET.png \
	BOUNCE.png \
	BOUNCEXY.png \
	BPLATFORM.png \
	BUSCREATOR.png \
	BUSIN_f.png \
	BUSOUT_f.png \
	BUSSELECTOR.png \
	CANIMXY3D.png \
	CANIMXY.png \
	Capacitor.png \
	CBLOCK4.png \
	c_block.png \
	CBLOCK.png \
	CCS.png \
	CEVENTSCOPE.png \
	CFSCOPE.png \
	CLINDUMMY_f.png \
	CLKFROM.png \
	CLKGOTO.png \
	CLKGotoTagVisibility.png \
	CLKIN_f.png \
	CLKINV_f.png \
	CLKOUT_f.png \
	CLKOUTV_f.png \
	CLKSOM_f.png \
	CLKSOMV_f.png \
	CLOCK_c.png \
	CLOCK_f.png \
	CLR_f.png \
	CLR.png \
	CLSS_f.png \
	CLSS.png \
	CMAT3D.png \
	CMATVIEW.png \
	CMSCOPE.png \
	Constant.png \
	ConstantVoltage.png \
	CONST_f.png \
	CONST_m.png \
	CONST.png \
	CONSTRAINT_c.png \
	CONVERT.png \
	COSBLK_f.png \
	Counter.png \
	CSCOPE.png \
	CSCOPXY3D.png \
	CSCOPXY.png \
	CUMSUM.png \
	CurrentSensor.png \
	CURV_f.png \
	CVS.png \
	DEADBAND.png \
	DEBUG_SCICOS.png \
	DELAY_f.png \
	DELAYV_f.png \
	DEMUX_f.png \
	DEMUX.png \
	DERIV.png \
	DFLIPFLOP.png \
	DIFF_c.png \
	DIFF_f.png \
	Diode.png \
	DLATCH.png \
	DLRADAPT_f.png \
	DLR_f.png \
	DLR.png \
	DLSS_f.png \
	DLSS.png \
	DOLLAR_f.png \
	DOLLAR_m.png \
	EDGE_TRIGGER.png \
	ENDBLK.png \
	ESELECT_f.png \
	EVTDLY_f.png \
	EVTDLY.png \
	EVTGEN_f.png \
	EVTVARDLY.png \
	EXPBLK_f.png \
	EXPBLK_m.png \
	EXPRESSION.png \
	Extract_Activation.png \
	EXTRACTBITS.png \
	EXTRACTOR.png \
	EXTRACT.png \
	EXTTRI.png \
	Feedback.png \
	FirstOrder.png \
	Flowmeter.png \
	ForIterator.png \
	fortran_block.png \
	freq_div.png \
	FROMMO.png \
	FROM.png \
	FROMWSB.png \
	GAIN_f.png \
	GAINBLK_f.png \
	GAINBLK.png \
	Gain.png \
	GENERAL_f.png \
	generic_block2.png \
	generic_block3.png \
	generic_block.png \
	GENSIN_f.png \
	GENSQR_f.png \
	GEN_SQR.png \
	GOTOMO.png \
	GOTO.png \
	GotoTagVisibilityMO.png \
	GotoTagVisibility.png \
	Ground_g.png \
	Ground.png \
	GTKRANGE.png \
	Gyrator.png \
	HALT_f.png \
	HYSTHERESIS.png \
	IdealTransformer.png \
	IFTHEL_f.png \
	Inductor.png \
	IN_f.png \
	INIMPL_f.png \
	INTEGRAL_f.png \
	INTEGRAL_m.png \
	INTEGRAL.png \
	INTMUL.png \
	INTRP2BLK_f.png \
	INTRPLBLK_f.png \
	INVBLK_f.png \
	INVBLK.png \
	ISELECT_f.png \
	ISELECT_m.png \
	JKFLIPFLOP.png \
	Limiter.png \
	LOGBLK_f.png \
	LOGICAL_OP.png \
	LOGIC.png \
	LOOKUP2D.png \
	LOOKUP_c.png \
	LOOKUP_f.png \
	Loop_Breaker.png \
	MATBKSL.png \
	MATCATH.png \
	MATCATV.png \
	MATDET.png \
	MATDIAG.png \
	MATDIV.png \
	MATEIG.png \
	MATEXPM.png \
	MATINV.png \
	MATLU.png \
	MATMAGPHI.png \
	MATMUL.png \
	MATPINV.png \
	MATRESH.png \
	MATSING.png \
	MATSUM.png \
	MATTRAN.png \
	MATZCONJ.png \
	MATZREIM.png \
	MAX_f.png \
	MAXMIN.png \
	MBLOCK.png \
	MCLOCK_f.png \
	MEMORY_f.png \
	MFCLCK_f.png \
	M_freq.png \
	MIN_f.png \
	Modulo_Count.png \
	MPBLOCK.png \
	M_SWITCH.png \
	MUX_f.png \
	MUX.png \
	M_VSWITCH.png \
	NEGTOPOS_f.png \
	NMOS.png \
	NPN.png \
	NRMSOM_f.png \
	OpAmp.png \
	OUT_f.png \
	OUTIMPL_f.png \
	PAL_f.png \
	PDE.png \
	PENDULUM_ANIM.png \
	PerteDP.png \
	PID2.png \
	PID.png \
	PI.png \
	PMOS.png \
	PNP.png \
	POSTONEG_f.png \
	PotentialSensor.png \
	POWBLK_f.png \
	PROD_f.png \
	PRODUCT.png \
	PT1.png \
	PuitsP.png \
	PULSE_SC.png \
	QUANT_f.png \
	RAMP.png \
	RAND_f.png \
	RAND_m.png \
	RATELIMITER.png \
	READAU_f.png \
	READC_f.png \
	REGISTER_f.png \
	REGISTER.png \
	RELATIONALOP.png \
	RELAY_f.png \
	Resistor.png \
	RFILE_f.png \
	RICC.png \
	ROOTCOEF.png \
	SAMPHOLD_m.png \
	SampleCLK.png \
	SAMPLEHOLD_f.png \
	SAT_f.png \
	SATURATION.png \
	SAWTOOTH_f.png \
	SCALAR2VECTOR.png \
	scifunc_block5.png \
	scifunc_block_m.png \
	scifunc_block.png \
	SecondOrder.png \
	SELECT_f.png \
	SELECT_m.png \
	SENSOR_f.png \
	Sensor.png \
	SHIFT.png \
	Sigbuilder.png \
	SIGNUM.png \
	SINBLK_f.png \
	Sine.png \
	SineTF.png \
	SineVoltage.png \
	SLIDER_f.png \
	SLIDER_m.png \
	SourceP.png \
	SQRT.png \
	SRFLIPFLOP.png \
	STEP_FUNCTION.png \
	SUBMAT.png \
	SUM_f.png \
	SUMMATION.png \
	SUPER_f.png \
        SWITCH2_s.png \
	SWITCH2_m.png \
	SWITCH2.png \
	SWITCH_f.png \
	Switch.png \
	SyncTag.png \
	TANBLK_f.png \
	TanTF.png \
	TCLSS_f.png \
	TCLSS.png \
	TEXT_f.png \
	TIME_DELAY.png \
	TIME_f.png \
	TKSCALE.png \
	TOWS_c.png \
	TRANSMIT.png \
	TRASH_f.png \
	TrigFun.png \
	VanneReglante.png \
	VARIABLE_DELAY.png \
	VariableResistor.png \
	VirtualCLK0.png \
	VoltageSensor.png \
	VsourceAC.png \
	VVsourceAC.png \
	WFILE_f.png \
	WhileIterator.png \
	WRITEAU_f.png \
	WRITEC_f.png \
	ZCROSS_f.png \
	DMSCOPE.png \
	COMBINATORIALLOGIC.png \
	SATURATIONDYNAMIC.png \
	DISCRETE_DERIVATIVE.png

PLUS= Atmosphere.png FluxSensor.png \
       HGround.png Medias.png Pipe.png \
       PressionSource.png PressureSensor.png Tank2.png \
       Tank3.png Tank.png ValveContinuous.png ValveDiscrete.png VolumeFlow.png;

# difficult here to use patsubst since blocks 
# are defined in different directory ans directories can contain
# code which are not block code.

BLOCKS=$(patsubst ../../blocks/%.sci,%.png,$(wildcard ../../blocks/*/*.sci))
B1=$(subst Sources/,,$(BLOCKS))

all	: $(PNGS) $(PLUS)

%.zopng	: %.svg
	inkscape $*.svg --export-area-drawing --export-png=$*.png  --export-dpi=48

svg	:
	$(SCIDIR)/bin/scilex -e "exec('../../../loader.sce');create_palette_icons();quit"


# link between the macros which defines the block and the image 

%.png	: ../../blocks/*/%.sci
	@$(SCIDIR)/bin/scilex -e "exec('../../../loader.sce');scicos_create_icon('$*');quit"
	@inkscape $*.svg --export-area-drawing --export-png=$*.png  --export-dpi=48

#	@$(RM) -f $*.svg 

